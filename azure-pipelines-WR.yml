# Node.js
# Build a general Node.js project with npm.
# Add steps that analyze code, save build artifacts, deploy, and more:
# https://docs.microsoft.com/azure/devops/pipelines/languages/javascript
pool:
  vmImage: windows-2019

stages:
  - stage: e2eTestStage
    jobs:
      - job: e2eTestJob
        steps:
          - task: NodeTool@0
            inputs:
              versionSpec: "10.x"
            displayName: "Install Node.js"

          - script: |
              npm i
            workingDirectory: "$(Build.SourcesDirectory)/bcd-e2e-tests"
            displayName: "install"

          - script: |
              npm run e2e -- spec/citest.js
            workingDirectory: "$(Build.SourcesDirectory)/bcd-e2e-tests"
            displayName: "test"

          - script: |
              npm run e2e-report
            workingDirectory: "$(Build.SourcesDirectory)/bcd-e2e-tests"
            displayName: "report"
